
{% extends "base.html" %}

{% block content %}


{% if current_user.is_authenticated %}


<form action="{{ url_for('assets.asset_selection') }}" method="post">
    <div class="form-row">
        {{ form.hidden_tag() }}
        <div class="col-8">
            <!-- {{ form.asset.label }} -->
            {{ form.asset(list="id_datalist") }}
            <datalist id="id_datalist">
            {% for asset in asset_list %}
                <option value="{{ asset }}"></option>
            {% endfor %}
            </datalist>
        </div>
        <div class="col-2">
            <!-- {{ form.number.label }} -->
            {{ form.number() }}
        </div>
        <div class="col-2">
            {{ form.submit }}
        </div>
    </div>
</form>


<div class="row">
  <div class="col-10">

        <hr/>

        <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Type</th>
                <th scope="col">Ticker</th>
                <th scope="col">Name</th>
                <th scope="col">Sector</th>
                <th scope="col">Num</th>
                <th scope="col">Price</th>
                <th scope="col">Curr.</th>
              </tr>
            </thead>
            <tbody>
    
              {% if portfolio_list %}
                {% for type, ticker, name, sector, number, price, currency in portfolio_list %}
                    <tr>
                        <th scope="row">{{loop.index}}</th>
                        <td>{{type}}</td>
                        <td>{{ticker}}</td>
                        <td>{{name}}</td>
                        <td>{{sector}}</td>
                        <td>{{number}}</td>
                        <td>{{price}}</td>
                        <td>{{currency}}</td>
                    </tr>
                {% endfor %}
              {% else %}
                  Portfolio List Error
              {% endif %}
    
            </tbody>
          </table>

    </div>

    <div class="col-2">
        <hr/>

        <form action="{{ url_for('assets.update_rates') }}" method="post">
            {{ update_rates_form.hidden_tag() }}
            {{ update_rates_form.submit }}
        </form>

        <!-- <button type="button" class="btn btn-primary btn-lg">Update Rates</button> -->
    </div>
</div>

{% else %}

    <div class="alert alert-primary" role="alert">
        Please <a href="{{ url_for('user.login') }}" class="alert-link">Login</a>  or
        <a href="{{ url_for('user.register') }}" class="alert-link">Register</a> to create portfolio!
    </div>

{% endif %}

{% endblock %}
